{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { signatureToPubkey } from '@hanchon/signature-to-pubkey';\r\nimport { arrayify } from \"@ethersproject/bytes\";\r\nimport { hashMessage } from \"@ethersproject/hash\";\r\n// @ts-ignore\r\nimport { ua2hex } from \"crypto-addr-codec\";\r\nexport function getPubkey(address) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var ethereum, message, sign, pk;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ethereum = window.ethereum;\r\n                    message = arrayify(hashMessage('generate_pubkey'));\r\n                    return [4 /*yield*/, ethereum.request({ method: \"eth_sign\", params: [address, \"0x\" + ua2hex(message)] })];\r\n                case 1:\r\n                    sign = _a.sent();\r\n                    pk = signatureToPubkey(sign, Buffer.from(message));\r\n                    console.log('pubkey:', pk);\r\n                    return [2 /*return*/, pk];\r\n            }\r\n        });\r\n    });\r\n}\r\n//# sourceMappingURL=signature-to-pubkey.js.map","references":["/Users/steven/work/spidexjs/node_modules/@hanchon/signature-to-pubkey/lib/converter.d.ts","/Users/steven/work/spidexjs/node_modules/@ethersproject/bytes/lib/index.d.ts","/Users/steven/work/spidexjs/node_modules/@ethersproject/hash/lib/index.d.ts","/Users/steven/work/spidexjs/node_modules/crypto-addr-codec/dist/index.js"],"map":"{\"version\":3,\"file\":\"signature-to-pubkey.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/signature-to-pubkey.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAC,iBAAiB,EAAC,MAAM,8BAA8B,CAAC;AAC/D,OAAO,EAAC,QAAQ,EAAC,MAAM,sBAAsB,CAAC;AAC9C,OAAO,EAAC,WAAW,EAAC,MAAM,qBAAqB,CAAC;AAChD,aAAa;AACb,OAAO,EAAC,MAAM,EAAC,MAAM,mBAAmB,CAAC;AAEzC,MAAM,UAAgB,SAAS,CAAC,OAAe;;;;;;oBAEtC,QAAQ,GAAS,MAAM,SAAf,CAAgB;oBAC3B,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC;oBAC1C,qBAAM,QAAQ,CAAC,OAAO,CAAC,EAAC,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,EAAC,CAAC,EAAA;;oBAA9F,IAAI,GAAG,SAAuF;oBAC9F,EAAE,GAAG,iBAAiB,CAC1B,IAAI,EACJ,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CACrB,CAAA;oBAED,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC,CAAA;oBAC1B,sBAAO,EAAE,EAAC;;;;CAEX\"}","dts":{"name":"/Users/steven/work/spidexjs/packages/metamask-sign-recover-pubkey/node_modules/.cache/rollup-plugin-typescript2/placeholder/src/signature-to-pubkey.d.ts","writeByteOrderMark":false,"text":"export declare function getPubkey(address: string): Promise<string>;\r\n"}}
