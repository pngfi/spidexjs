{"code":"import { createMsgConvertCoin as protoMsgConvertCoin, createTransaction, } from '../../../../proto';\r\nimport { createEIP712, generateFee, generateMessage, generateTypes, createMsgConvertCoin, MSG_CONVERT_COIN_TYPES, } from '../../../../eip712';\r\nexport function createTxMsgConvertCoin(chain, sender, fee, memo, params) {\r\n    // EIP712\r\n    var feeObject = generateFee(fee.amount, fee.denom, fee.gas, sender.accountAddress);\r\n    var types = generateTypes(MSG_CONVERT_COIN_TYPES);\r\n    var msg = createMsgConvertCoin(params.denom, params.amount, params.receiverHexFormatted, params.senderEvmosFormatted);\r\n    var messages = generateMessage(sender.accountNumber.toString(), sender.sequence.toString(), chain.cosmosChainId, memo, feeObject, msg);\r\n    var eipToSign = createEIP712(types, chain.chainId, messages);\r\n    // 定义消息类型\r\n    var msgCosmos = protoMsgConvertCoin(params.denom, params.amount, params.receiverHexFormatted, params.senderEvmosFormatted);\r\n    // 组建tx\r\n    var tx = createTransaction(msgCosmos, memo, fee.amount, fee.denom, parseInt(fee.gas, 10), 'ethsecp256', sender.pubkey, sender.sequence, sender.accountNumber, chain.cosmosChainId);\r\n    return {\r\n        signDirect: tx.signDirect,\r\n        legacyAmino: tx.legacyAmino,\r\n        eipToSign: eipToSign,\r\n    };\r\n}\r\n//# sourceMappingURL=msgConvertCoin.js.map","references":["/Users/steven/work/spidexjs/packages/proto/dist/index.d.ts","/Users/steven/work/spidexjs/packages/eip712/dist/index.d.ts","/Users/steven/work/spidexjs/packages/transactions/src/messages/common.ts"],"map":"{\"version\":3,\"file\":\"msgConvertCoin.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/messages/erc20/msgConvertCoin.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACL,oBAAoB,IAAI,mBAAmB,EAC3C,iBAAiB,GAClB,MAAM,mBAAmB,CAAA;AAE1B,OAAO,EACL,YAAY,EACZ,WAAW,EACX,eAAe,EACf,aAAa,EACb,oBAAoB,EACpB,sBAAsB,GACvB,MAAM,oBAAoB,CAAA;AAW3B,MAAM,UAAU,sBAAsB,CACpC,KAAY,EACZ,MAAc,EACd,GAAQ,EACR,IAAY,EACZ,MAA6B;IAE7B,SAAS;IACT,IAAM,SAAS,GAAG,WAAW,CAC3B,GAAG,CAAC,MAAM,EACV,GAAG,CAAC,KAAK,EACT,GAAG,CAAC,GAAG,EACP,MAAM,CAAC,cAAc,CACtB,CAAA;IACD,IAAM,KAAK,GAAG,aAAa,CAAC,sBAAsB,CAAC,CAAA;IAEnD,IAAM,GAAG,GAAG,oBAAoB,CAC9B,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,oBAAoB,EAC3B,MAAM,CAAC,oBAAoB,CAC5B,CAAA;IACD,IAAM,QAAQ,GAAG,eAAe,CAC9B,MAAM,CAAC,aAAa,CAAC,QAAQ,EAAE,EAC/B,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAC1B,KAAK,CAAC,aAAa,EACnB,IAAI,EACJ,SAAS,EACT,GAAG,CACJ,CAAA;IACD,IAAM,SAAS,GAAG,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;IAE9D,SAAS;IACT,IAAM,SAAS,GAAG,mBAAmB,CACnC,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,oBAAoB,EAC3B,MAAM,CAAC,oBAAoB,CAC5B,CAAA;IAED,OAAO;IACP,IAAM,EAAE,GAAG,iBAAiB,CAC1B,SAAS,EACT,IAAI,EACJ,GAAG,CAAC,MAAM,EACV,GAAG,CAAC,KAAK,EACT,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,EACrB,YAAY,EACZ,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,QAAQ,EACf,MAAM,CAAC,aAAa,EACpB,KAAK,CAAC,aAAa,CACpB,CAAA;IAED,OAAO;QACL,UAAU,EAAE,EAAE,CAAC,UAAU;QACzB,WAAW,EAAE,EAAE,CAAC,WAAW;QAC3B,SAAS,WAAA;KACV,CAAA;AACH,CAAC\"}","dts":{"name":"/Users/steven/work/spidexjs/packages/transactions/node_modules/.cache/rollup-plugin-typescript2/placeholder/transactions/src/messages/erc20/msgConvertCoin.d.ts","writeByteOrderMark":false,"text":"import { Chain, Fee, Sender } from '../common';\r\nexport interface MessageMsgConvertCoin {\r\n    denom: string;\r\n    amount: string;\r\n    receiverHexFormatted: string;\r\n    senderEvmosFormatted: string;\r\n}\r\nexport declare function createTxMsgConvertCoin(chain: Chain, sender: Sender, fee: Fee, memo: string, params: MessageMsgConvertCoin): {\r\n    signDirect: {\r\n        body: import(\"../../../../proto/dist/proto/cosmos/tx/v1beta1/tx\").cosmos.tx.v1beta1.TxBody;\r\n        authInfo: import(\"../../../../proto/dist/proto/cosmos/tx/v1beta1/tx\").cosmos.tx.v1beta1.AuthInfo;\r\n        signBytes: string;\r\n    };\r\n    legacyAmino: {\r\n        body: import(\"../../../../proto/dist/proto/cosmos/tx/v1beta1/tx\").cosmos.tx.v1beta1.TxBody;\r\n        authInfo: import(\"../../../../proto/dist/proto/cosmos/tx/v1beta1/tx\").cosmos.tx.v1beta1.AuthInfo;\r\n        signBytes: string;\r\n    };\r\n    eipToSign: {\r\n        types: object;\r\n        primaryType: string;\r\n        domain: {\r\n            name: string;\r\n            version: string;\r\n            chainId: number;\r\n            verifyingContract: string;\r\n            salt: string;\r\n        };\r\n        message: object;\r\n    };\r\n};\r\n"}}
